<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="Fey's blog" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="Fey&#39;s blog">
<meta property="og:url" content="https://zqfmcl.github.io/dialy/page/13/index.html">
<meta property="og:site_name" content="Fey&#39;s blog">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fey&#39;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://zqfmcl.github.io/dialy/page/13/">





  <title>Fey's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Fey's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">个人博客</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zqfmcl.github.io/dialy/2019/10/04/2019-10-04-MongoDB启动/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zqfmcl">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fey's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/2019-10-04-MongoDB启动/" itemprop="url">MongoDB</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T10:00:00+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="MongoDB是一个文档数据库"><a href="#MongoDB是一个文档数据库" class="headerlink" title="MongoDB是一个文档数据库"></a>MongoDB是一个文档数据库</h1><p>官方反复强调说：MongoDB是一个文档数据库，这是因为在MongoDB中的<strong>记录</strong>（record）都是一个<strong>文档</strong>(document），它是数据库中的最小数据集合，由字段和值对组成的数据结构。其中字段的值可以包括其他文档，数组和文档数组。</p>
<p>你初看MongoDB的文档的结构可以发现，它就类似JSON对象（实际上它就是以二进制的JSON存储的）</p>
<p><img src="https://docs.mongodb.com/manual/_images/crud-annotated-document.bakedsvg.svg" alt="MongoDB文档。"></p>
<p>使用文档的好处是：</p>
<ul>
<li>文档（即对象）对应于许多编程语言中的本机数据类型（特别是Javascript）。</li>
<li>嵌入式文档和数组减少了对昂贵连接的需求。</li>
<li>动态模式支持流畅的多态性。</li>
</ul>
<h1 id="MongoDB与SQL的数据结构对比详解"><a href="#MongoDB与SQL的数据结构对比详解" class="headerlink" title="MongoDB与SQL的数据结构对比详解"></a>MongoDB与SQL的数据结构对比详解</h1><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g1cpt2erqkj310i0m8gsm.jpg" alt="image-20190323143249276"></p>
<table>
<thead>
<tr>
<th><strong>SQL Terms/Concepts</strong></th>
<th><strong>MongoDB Terms/Concepts</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>database</strong></td>
<td>database</td>
</tr>
<tr>
<td><strong>table</strong></td>
<td>collection</td>
</tr>
<tr>
<td><strong>row</strong></td>
<td>document / BSON document</td>
</tr>
<tr>
<td><strong>column</strong></td>
<td>field</td>
</tr>
<tr>
<td><strong>index</strong></td>
<td>index</td>
</tr>
<tr>
<td><strong>table joins</strong></td>
<td>embedded documents and linking</td>
</tr>
<tr>
<td><strong>primary key</strong></td>
<td>_id</td>
</tr>
<tr>
<td><strong>aggregation (e.g. group by)</strong></td>
<td>aggregation pipeline</td>
</tr>
</tbody></table>
<h1 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h1><ul>
<li>使用BSON存储数据（二进制的JSON）</li>
<li>支持相对丰富的查询操作</li>
<li>支持索引</li>
<li>副本集</li>
<li>分片</li>
<li>无模式</li>
<li>部署简单方便（默认无身份认证）</li>
</ul>
<h1 id="服务启动"><a href="#服务启动" class="headerlink" title="服务启动"></a>服务启动</h1><p>在本地运行mongoDB分两块：</p>
<h2 id="服务端进程"><a href="#服务端进程" class="headerlink" title="服务端进程"></a>服务端进程</h2><p>服务端进程一般我们需要以守护进程形式启动：</p>
<pre><code>mongod [opt] --fork --logpath=...</code></pre><p><strong>常用命令参数</strong>：</p>
<ul>
<li>fork : 以守护进程起来（必须制定log存储位置 ）</li>
<li>logpath ： 指定log路径</li>
<li>syslog ：使用默认系统log（我的在/var/log/mongodb/mongodb.log）</li>
</ul>
<p><img src="http://img.hksite.cn/1483527212989" alt></p>
<p>更多命令参数：<a href="https://docs.mongodb.com/manual/mongo/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/mongo/</a></p>
<h3 id="关闭服务"><a href="#关闭服务" class="headerlink" title="关闭服务"></a>关闭服务</h3><p>在客户端中关闭：</p>
<pre><code class="shell">&gt; db.shutdownServer()
shutdown command only works with the admin database; try &#39;use admin&#39;
&gt; use admin
&gt; db.shutdownServer()
server should be down...</code></pre>
<p>命令行：</p>
<pre><code>$ kill -2 PID
　　原理：-2表示向mongod进程发送SIGINT信号。
或
$ kill -4 PID
　　原理：-4表示向mognod进程发送SIGTERM信号。</code></pre><p>注：不要使用<strong>kill -9</strong>。数据库直接关闭，数据丢失，数据文件损失，修复数据库（成本高，有风险）</p>
<h3 id="监控日志"><a href="#监控日志" class="headerlink" title="监控日志"></a>监控日志</h3><p><strong>注：</strong>如果要持续监视log的命令：用tail的-f参数可以持续监听目录</p>
<pre><code>tail -f mongodb.log</code></pre><p><img src="http://img.hksite.cn/1483527357856" alt></p>
<h2 id="客户端使用"><a href="#客户端使用" class="headerlink" title="客户端使用"></a>客户端使用</h2><pre><code>mongo IP:PORT</code></pre><p><img src="http://img.hksite.cn/1478075611496" alt></p>
<h2 id="基本操作命令"><a href="#基本操作命令" class="headerlink" title="基本操作命令"></a>基本操作命令</h2><p>由于是是nosql数据库，所以<strong>不需要特定的命令去创建数据库创建表</strong>，如果要使用一个数据库，但是它不存在的话，可以直接使用的</p>
<p>更加详细的命令请参考<a href="https://docs.mongodb.com/manual/crud/" target="_blank" rel="noopener">官方手册</a>：</p>
<h2 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h2><ul>
<li><p><strong>show</strong> dbs ：查看所有数据库</p>
</li>
<li><p><strong>show</strong> collections ：查看数据库里的所有的集合</p>
</li>
<li><p><strong>use</strong> <code>db</code> ：切换到某个数据库（哪怕是创建一个全新的数据库，也可以直接use）</p>
<p><img src="http://img.hksite.cn/1483527714439" alt></p>
</li>
</ul>
<h1 id="CRUD操作"><a href="#CRUD操作" class="headerlink" title="CRUD操作"></a>CRUD操作</h1><h2 id="创建文档"><a href="#创建文档" class="headerlink" title="创建文档"></a>创建文档</h2><ul>
<li>db<strong>.<code>CollectionName</code>.</strong>insertOne ({“<code>key</code>“:”<code>value</code>“})   插入一条数据 <em>v3.2中加入</em></li>
<li>db<strong>.<code>CollectionName</code>.</strong>insertMany([{“<code>key</code>“:”<code>value</code>“}, {“<code>key2</code>“:”<code>value2</code>“}……])  插入多条数据 <em>v3.2中加入</em></li>
<li><strong>db</strong>.<code>CollectionName</code>.<strong>insert</strong> (……)  插入一条或多条数据</li>
</ul>
<p><img src="http://img.hksite.cn/1483528125879" alt></p>
<p>因为mongodb是无模式的，所以它不要求数据库中的数据必须使用相同的格式，也就是说，你可以再插入以下数据：</p>
<p><img src="http://img.hksite.cn/1483528527859" alt></p>
<p><strong>注意：</strong>这里的<code>_id</code>字段是所有的文档都有的字段（是mongoDB自动生成的唯一值），主要是通过它来查询不同的文档的。</p>
<h2 id="查询文档"><a href="#查询文档" class="headerlink" title="查询文档"></a>查询文档</h2><p><strong>db</strong>.<code>CollectionName</code>.<strong>find</strong> (<code>条件</code>) (如果不加参数则为<strong>查询全部</strong>)</p>
<pre><code class="javascript">db.CollectionName.find()   // 查询全部内容</code></pre>
<h3 id="查询条件"><a href="#查询条件" class="headerlink" title="查询条件"></a>查询条件</h3><p>查询条件是mongodb一般来说查询条件有两种形式：</p>
<ul>
<li>完全匹配：<code>{ &lt;field1&gt; : &lt;value1&gt; , &lt;field2&gt; : &lt;value2&gt;, … }</code></li>
</ul>
<pre><code>db.restaurants.find( { &quot;borough&quot;: &quot;Manhattan&quot; } )</code></pre><ul>
<li>条件匹配：<code>{ &lt;field1&gt;: { &lt;operator1&gt;: &lt;value1&gt; } }</code></li>
</ul>
<h3 id="条件匹配"><a href="#条件匹配" class="headerlink" title="条件匹配"></a>条件匹配</h3><ul>
<li><p><strong>in</strong>：{<code>$in</code>: [ ] }</p>
<pre><code>db.inventory.find( { status: { $in: [ &quot;A&quot;, &quot;D&quot; ] } } )</code></pre><p>类比sql：</p>
<pre><code class="sql">SELECT * FROM inventory WHERE status in (&quot;A&quot;, &quot;D&quot;)</code></pre>
</li>
</ul>
<ul>
<li><p><strong>大于/小于</strong>：{<code>$gt</code>/<code>$lt</code> :  }</p>
<pre><code>db.restaurants.find( { &quot;grades.score&quot;: { $gt: 30 } } )</code></pre></li>
<li><p><strong>或</strong>：{<code>$or</code>: <code>[{ &lt;field1&gt;: &lt;value1&gt;},{&lt;field2&gt;: &lt;value2&gt;}] }</code></p>
<pre><code>db.inventory.find( { $or: [ { status: &quot;A&quot; }, { qty: { $lt: 30 } } ] } )</code></pre><p>类比sql：</p>
<pre><code class="sql">SELECT * FROM inventory WHERE status = &quot;A&quot; OR qty &lt; 30</code></pre>
</li>
</ul>
<ul>
<li><p><strong>与：</strong>直接用逗号连接</p>
<pre><code>db.inventory.find( { status: &quot;A&quot;, qty: { $lt: 30 } } )</code></pre><p>类比sql：</p>
<pre><code class="sql">SELECT * FROM inventory WHERE status = &quot;A&quot; AND qty &lt; 30</code></pre>
</li>
</ul>
<ul>
<li><p>符合操作</p>
<pre><code>db.inventory.find( {
     status: &quot;A&quot;,
     $or: [ { qty: { $lt: 30 } }, { item: /^p/ } ]
} )</code></pre><p>类比sql: </p>
<pre><code class="sql">SELECT * FROM inventory WHERE status = &quot;A&quot; AND ( qty &lt; 30 OR item LIKE &quot;p%&quot;)</code></pre>
</li>
</ul>
<h3 id="其他功能"><a href="#其他功能" class="headerlink" title="其他功能"></a>其他功能</h3><p><strong>db</strong>.<code>CollectionName</code>.<strong>find</strong>().<strong>count</strong>() 可以统计查询出的数目</p>
<h2 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h2><ul>
<li><strong>db</strong>.<code>CollectionName</code>.<strong>deleteOne</strong>(<code>删除条件</code> , <code>参数</code>)    ： 删除一条或多条数据  <em>v3.2中加入</em></li>
<li><strong>db</strong>.<code>CollectionName</code>.<strong>deleteMany</strong>(<code>删除条件</code> , <code>参数</code>)    ： 删除一条或多条数据  <em>v3.2中加入</em></li>
<li><strong>db</strong>.<code>CollectionName</code>.<strong>remove</strong>(<code>删除条件</code> , <code>参数</code>)    ： 删除一条或多条数据</li>
</ul>
<pre><code>db.restaurants.remove( { &quot;borough&quot;: &quot;Manhattan&quot; } )</code></pre><h3 id="删除一条"><a href="#删除一条" class="headerlink" title="删除一条"></a>删除一条</h3><p>如果不加参数，默认删除的是所有匹配的文档，如果你只想删除一个文档，加入参数：<code>{ justOne: true }</code></p>
<pre><code>db.restaurants.remove( { &quot;borough&quot;: &quot;Queens&quot; }, { justOne: true } )</code></pre><p>或者使用新api：deleteOne</p>
<pre><code>db.restaurants.deleteOne( { &quot;borough&quot;: &quot;Queens&quot; })</code></pre><h3 id="删除全部文档"><a href="#删除全部文档" class="headerlink" title="删除全部文档"></a>删除全部文档</h3><pre><code>db.restaurants.remove( { } )</code></pre><p>或者使用新api：deleteMany</p>
<pre><code>db.restaurants.deleteMany( { } )</code></pre><p>但是，其实还有一个更高效全面的删除全部文档的方法：<strong>把集合删除</strong></p>
<ul>
<li><strong>db</strong>.<code>CollectionName</code>.<strong>drop</strong>()</li>
</ul>
<p>，这时候要用<code>drop</code>命令，这时候，<strong>它会把包括索引在内的所有集合内容删除</strong>。</p>
<h2 id="修改文档"><a href="#修改文档" class="headerlink" title="修改文档"></a>修改文档</h2><ul>
<li><strong>db</strong>.<code>CollectionName</code>.<strong>updateOne</strong>(<code>条件</code>，<code>修改内容</code> ，<code>参数</code>) ：  更新一条数据  <em>v3.2中加入</em></li>
<li><strong>db</strong>.<code>CollectionName</code>.<strong>updateMany</strong>(<code>条件</code>，<code>修改内容</code> ，<code>参数</code>) :   更新多条数据  <em>v3.2中加入</em></li>
<li><strong>db</strong>.<code>CollectionName</code>.<strong>update</strong>(<code>条件</code>，<code>修改内容</code> ，<code>参数</code>) ：更新一条数据或多条数据</li>
</ul>
<blockquote>
<p>查询条件参考之前的<strong>“查询文档”</strong></p>
</blockquote>
<p>update语句是更新，所以它是会新增或修改原有的值。修改内容表达式的书写方式是：<code>$set</code> </p>
<pre><code>db.class.update( {&quot;name&quot;:&quot;ZhangQiang&quot;}, { $set:{&quot;No&quot;: &quot;123&quot;} } )</code></pre><p><img src="http://img.hksite.cn/1484209181920" alt></p>
<h3 id="修改多条数据"><a href="#修改多条数据" class="headerlink" title="修改多条数据"></a>修改多条数据</h3><p>update<strong>默认修改只修改单条数据</strong>，如果要修改多条数据，可以设置参数<code>{multi:true}</code></p>
<pre><code>db.class.update( {&quot;name&quot;:&quot;ZhangQiang&quot;}, { $set:{&quot;No&quot;: &quot;123&quot;} } , {multi: true})</code></pre><p>或者使用新API：updateMany</p>
<pre><code>db.class.updateMany( {&quot;name&quot;:&quot;ZhangQiang&quot;}, { $set:{&quot;No&quot;: &quot;123&quot;} } , {multi: true})</code></pre><h3 id="替换一条数据"><a href="#替换一条数据" class="headerlink" title="替换一条数据"></a>替换一条数据</h3><p>修改和替换是完全不同的概念，修改是在原来文档中进行修改，但是替换是用新的文档替换旧文档。</p>
<p>在<em>v3.2</em>之前，我们只有<code>save</code>方法进行文档替换，<code>save</code>方法在不提供<code>_id</code>字段的时候，会添加一个没有<code>_id</code>字段的文档，如果添加了<code>_id</code>字段，则会替换已存在的文档</p>
<ul>
<li><strong>db</strong>.<code>CollectionName</code>.<strong>save</strong>()  </li>
</ul>
<pre><code>db.class.save( {&quot;_id&quot;: ObjectId(&quot;586……&quot;), &quot;name&quot;:&quot;ZhangQiang&quot;, &quot;Age&quot;: &quot;13&quot;})</code></pre><p>在<em>v3.2</em>之后，有了replaceOne</p>
<pre><code>db.class.replaceOne( {&quot;name&quot;:&quot;ZhangQiang&quot;},{&quot;name&quot;:&quot;ZhangQiang&quot;, &quot;Age&quot;: &quot;13&quot;})</code></pre><p>​</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zqfmcl.github.io/dialy/2019/10/04/2019-10-04-Net-NodeJs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zqfmcl">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fey's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/2019-10-04-Net-NodeJs/" itemprop="url">Net-NodeJs</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T10:00:00+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="net"><a href="#net" class="headerlink" title="net"></a>net</h1><p><code>net</code> 模块提供了创建基于流的 TCP 或 IPC 服务器(<code>net.createServer()</code>)和客户端<code>(net.createConnection()</code>) 的异步网络 API。</p>
<h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><p>提供的是面向连接、可靠的字节流服务。当客户和服务器彼此交换数据前，必须先在双方之间建立一个TCP连接，之后才能传输数据。 TCP提供超时重发，丢弃重复数据，检验数据，流量控制等功能，保证数据能从一端传另一端.</p>
<h2 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h2><p>像TCP/IP、TCP和UDP等协议只有一套，而我们系统多个TCP连接或多个应用程序进程必须通过同一个TCP协议端口传输数据。 为了区别不同的应用程序进程和连接，许多计算机操作系统为应用程序与TCP/IP协议交互提供了称为套接字(Socket)的接口。<br>套接字就是支持TCP/IP网络通信的基本操作单元，是我们进行TCP/IP进行通信的接口</p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>TCP服务器</p>
<pre><code class="js">const net = require(&#39;net&#39;);
var server = net.createServer((socket) =&gt; {
    socket.on(&#39;data&#39;, (data) =&gt; {
        console.log(&#39;client send message: &#39;, data.toString());
    });
    socket.write(&#39;hello client&#39;);
});
server.listen(8888, &#39;127.0.0.1&#39;, ()=&gt;{
    console.log(server.address());
});</code></pre>
<p>客户端</p>
<pre><code class="js">const net = require(&#39;net&#39;);
var client = net.connect({port: 8888, host: &#39;127.0.0.1&#39;}, function() {
    client.write(&#39;hello server!\r\n&#39;);
});
client.on(&#39;data&#39;, (data) =&gt; {
    console.log(&#39;server send message: &#39;, data.toString());
    client.end();
});
client.on(&#39;end&#39;, () =&gt; {
    console.log(&#39;disconnected form server&#39;);
});</code></pre>
<p>一次最简单的通讯：</p>
<ol>
<li>TCP服务器端依次调用Socket()、bind()、listen()之后，就会监听指定的socket地址了。</li>
<li>TCP客户端依次调用Socket()、connect()之后就向TCP服务器发送了一个连接请求。</li>
<li>TCP服务器监听到这个请求之后，就会调用accept()函数去接收请求，这样连接就建立好了。之后就可以开始网络I/O操作了，即类同于普通文件的读写I/O操作。</li>
</ol>
<h2 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h2><ul>
<li>‘close’ 事件</li>
</ul>
<p>当server关闭的时候触发. 注意,如果有连接存在, 直到所有的连接结束才会触发这个事件</p>
<ul>
<li>‘connection’ 事件</li>
</ul>
<p>当一个新的connection建立的时候触发. socket 是一个 net.Socket的实例对象.</p>
<ul>
<li>‘error’ 事件</li>
</ul>
<p>当错误出现的时候触发。</p>
<ul>
<li>‘listening’ 事件</li>
</ul>
<p>当服务被绑定后调用 <a href="http://nodejs.cn/api/net.html#net_server_listen" target="_blank" rel="noopener">server.listen()</a>。</p>
<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><p>Socket对象创建TCP客户端。主要包含2个方法和一个事件监听器。</p>
<ol>
<li>write方法，往socket的另一端写入数据；</li>
<li>end方法，结束socket;</li>
<li>on(‘data’,func)事件监听，数据接收。</li>
</ol>
<ul>
<li>new net.Socket([options])</li>
</ul>
<p>创建一个 socket 对象。</p>
<ul>
<li>‘close’ 事件</li>
</ul>
<p>一旦 socket 完全关闭就发出该事件。</p>
<ul>
<li>‘connect’ 事件</li>
</ul>
<p>当一个 socket 连接成功建立的时候触发该事件。</p>
<ul>
<li>‘data’ 事件</li>
</ul>
<p>当接收到数据的时触发该事件。data 参数是一个 Buffer 或 String。数据编码由 socket.setEncoding() 设置。</p>
<ul>
<li>‘end’ 事件</li>
</ul>
<p>当 socket 的另一端发送一个 FIN 包的时候触发，从而结束 socket 的可读端。</p>
<ul>
<li>‘error’ 事件</li>
</ul>
<p>当错误发生时触发。</p>
<ul>
<li>‘lookup’ 事件</li>
</ul>
<p>在找到主机之后创建连接之前触发。不可用于 UNIX socket。</p>
<ul>
<li>‘timeout’ 事件</li>
</ul>
<p>当 socket 超时的时候触发。该事件只是用来通知 socket 已经闲置。用户必须手动关闭。</p>
<p>参考：</p>
<ol>
<li><a href="http://nodejs.cn/api/net.html" target="_blank" rel="noopener">http://nodejs.cn/api/net.html</a></li>
<li><a href="https://yi-love.github.io/blog/node.js/2017/02/21/node-net.html" target="_blank" rel="noopener">https://yi-love.github.io/blog/node.js/2017/02/21/node-net.html</a></li>
<li><a href="https://0532.gitbooks.io/nodejs/content/netserver_tcp/README.html" target="_blank" rel="noopener">https://0532.gitbooks.io/nodejs/content/netserver_tcp/README.html</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zqfmcl.github.io/dialy/2019/10/04/2019-10-04-Mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zqfmcl">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fey's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/2019-10-04-Mysql/" itemprop="url">Mysql</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T10:00:00+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->
<!-- code_chunk_output -->

<ul>
<li><a href="#mysql">MySQL</a><ul>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C">数据库操作</a></li>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%93%8D%E4%BD%9C">数据库表操作</a></li>
<li><a href="#mysql%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">MySQL数据类型</a><ul>
<li><a href="#%E6%95%B0%E5%AD%97%E5%9E%8B">数字型</a></li>
<li><a href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B">日期和时间类型</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B">字符串类型</a></li>
<li><a href="#%E5%AD%97%E6%AE%B5%E7%9A%84%E7%BA%A6%E6%9D%9F%E6%9D%A1%E4%BB%B6">字段的约束条件</a></li>
</ul>
</li>
<li><a href="#sql%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4">sql查询操作命令</a><ul>
<li><a href="#distinct">DISTINCT</a></li>
<li><a href="#order-by">ORDER BY</a></li>
<li><a href="#where">WHERE</a></li>
<li><a href="#in">IN</a></li>
<li><a href="#not-in">NOT IN</a></li>
<li><a href="#between-and">BETWEEN AND</a></li>
<li><a href="#like">LIKE</a></li>
<li><a href="#limit">LIMIT</a></li>
<li><a href="#is-null">IS NULL</a></li>
</ul>
</li>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%88%86%E7%BB%84%E4%B8%8E%E8%BF%9E%E6%8E%A5">数据分组与连接</a><ul>
<li><a href="#group-by">GROUP BY</a></li>
</ul>
</li>
<li><a href="#%E8%BF%9E%E6%8E%A5">连接</a><ul>
<li><a href="#inner-join">INNER JOIN</a></li>
<li><a href="#left-join">LEFT JOIN</a></li>
<li><a href="#right-join">RIGHT JOIN</a></li>
</ul>
</li>
<li><a href="#%E5%AD%97%E6%AE%B5%E5%A4%84%E7%90%86">字段处理</a><ul>
<li><a href="#%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E5%90%8D">修改字段名</a></li>
<li><a href="#%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">修改字段的数据类型</a></li>
<li><a href="#%E5%A2%9E%E5%8A%A0%E5%AD%97%E6%AE%B5">增加字段</a></li>
<li><a href="#%E5%88%A0%E9%99%A4%E5%AD%97%E6%AE%B5">删除字段</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- /code_chunk_output -->

<h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><p><code>MySQL</code> 为关系型数据库(Relational Database Management System)，一个关系型数据库由一个或数个表格组成。</p>
<p><img src="C:/Users/Administrator/Desktop/My-study-records-master/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/img/mysql.jpg" alt="mysql.jpg"></p>
<p>登陆命令：</p>
<pre><code class="js">mysql –u用户名 [–h主机名或者IP地址,-P端口号] –p密码</code></pre>
<blockquote>
<p>–p密码选项不一定是要在最后；<br>–u、-h、-p后无空格。</p>
</blockquote>
<h2 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h2><pre><code class="bash">#查看数据库
show databases; 

#选择一个数据库
use 数据库名;

#创建数据库
create database 数据库名;

#查看创建数据库的SQL语言
show create database 数据库名;

#删除数据库
DROP DATABASE 数据库名;

#查看表
show tables;    </code></pre>
<h2 id="数据库表操作"><a href="#数据库表操作" class="headerlink" title="数据库表操作"></a>数据库表操作</h2><pre><code class="bash">#选择一个数据库
use 数据库名;

#创建表
create table student(id int(11) not null,name char(20));

#查看表结构
desc student;
+--------+----------+------+-----+---------+-------+
| Field  | Type     | Null | Key | Default | Extra |
+--------+----------+------+-----+---------+-------+
| std_id | int(11)  | NO   |     | NULL    |       |
| name   | char(20) | YES  |     | NULL    |       |
+--------+----------+------+-----+---------+-------+

#插入数据
-- 不指定字段名称
INSERT user VALUE(1001,&#39;king&#39;);
INSERT user VALUES(1001,&#39;king&#39;);

-- 指定字段
insert into user(id,name) values(1001,’zhangsan’)[,(1002,lisi)];
insert user set id=1001 ,name=&#39;zhangsan&#39;,;

-- 获取其他表的数据插入
insert student(name) select name from user;


#查询数据
select * from student; 
+--------+----------+
| std_id | name     |
+--------+----------+
|   1001 | zhangsan |
+--------+----------+

#删除数据
delete from student where id=1001;

#修改数据
update student set name=&#39;LiSi&#39; where id=1001;

#删除数据
delete from student where id=1001;</code></pre>
<h2 id="MySQL数据类型"><a href="#MySQL数据类型" class="headerlink" title="MySQL数据类型"></a>MySQL数据类型</h2><h3 id="数字型"><a href="#数字型" class="headerlink" title="数字型"></a>数字型</h3><p>这些类型包括严格数值数据类型(INTEGER、SMALLINT、DECIMAL和NUMERIC)，以及近似数值数据类型(FLOAT、REAL和DOUBLE PRECISION)。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>范围（有符号）</th>
<th>范围（无符号）</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>TINYINT</td>
<td>1 字节</td>
<td>(-128，127)</td>
<td>(0，255)</td>
<td>小整数值</td>
</tr>
<tr>
<td>SMALLINT</td>
<td>2 字节</td>
<td>(-32 768，32 767)</td>
<td>(0，65 535)</td>
<td>大整数值</td>
</tr>
<tr>
<td>MEDIUMINT</td>
<td>3 字节</td>
<td>(-8 388 608，8 388 607)</td>
<td>(0，16 777 215)</td>
<td>大整数值</td>
</tr>
<tr>
<td>INT或INTEGER</td>
<td>4 字节</td>
<td>(-2 147 483 648，2 147 483 647)</td>
<td>(0，4 294 967 295)</td>
<td>大整数值</td>
</tr>
<tr>
<td>BIGINT</td>
<td>8 字节</td>
<td>(-9 233 372 036 854 775 808，9 223 372 036 854 775 807)</td>
<td>(0，18 446 744 073 709 551 615)</td>
<td>极大整数值</td>
</tr>
<tr>
<td>FLOAT</td>
<td>4 字节</td>
<td>(-3.402 823 466 E+38，-1.175 494 351 E-38)，0，(1.175 494 351 E-38，3.402 823 466 351 E+38)</td>
<td>0，(1.175 494 351 E-38，3.402 823 466 E+38)</td>
<td>单精度 <br> 浮点数值</td>
</tr>
<tr>
<td>DOUBLE</td>
<td>8 字节</td>
<td>(-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td>
<td>0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td>
<td>双精度<br>浮点数值</td>
</tr>
<tr>
<td>DECIMAL</td>
<td>对DECIMAL(M,D) ，如果M&gt;D，为M+2否则为D+2</td>
<td>依赖于M和D的值</td>
<td>依赖于M和D的值</td>
<td>小数值</td>
</tr>
</tbody></table>
<blockquote>
<p>int(num)代表数据不够num位的情况下，用数字0填充。数据会自动变成unsigned类型的</p>
</blockquote>
<h3 id="日期和时间类型"><a href="#日期和时间类型" class="headerlink" title="日期和时间类型"></a>日期和时间类型</h3><p>表示时间值的日期和时间类型为DATETIME、DATE、TIMESTAMP、TIME和YEAR。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>大小(字节)</th>
<th>范围</th>
<th>格式</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>DATE</td>
<td>3</td>
<td>1000-01-01/9999-12-31</td>
<td>YYYY-MM-DD</td>
<td>日期值</td>
</tr>
<tr>
<td>TIME</td>
<td>3</td>
<td>‘-838:59:59’/‘838:59:59’</td>
<td>HH:MM:SS</td>
<td>时间值或持续时间</td>
</tr>
<tr>
<td>YEAR</td>
<td>1</td>
<td>1901/2155</td>
<td>YYYY    年份值</td>
<td></td>
</tr>
<tr>
<td>DATETIME</td>
<td>8</td>
<td>1000-01-01 00:00:00/9999-12-31 23:59:59</td>
<td>YYYY-MM-DD HH:MM:SS</td>
<td>混合日期和时间值</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>4</td>
<td>1970-01-01 00:00:00/2038-01-19 03:14:07</td>
<td>YYYYMMDD HHMMSS</td>
<td>混合日期和时间值，时间戳</td>
</tr>
</tbody></table>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><p>字符串类型指CHAR、VARCHAR、BINARY、VARBINARY、BLOB、TEXT、ENUM和SET。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>CHAR</td>
<td>0-255字节</td>
<td>定长字符串</td>
</tr>
<tr>
<td>VARCHAR</td>
<td>0-65535 字节</td>
<td>变长字符串</td>
</tr>
<tr>
<td>TINYBLOB</td>
<td>0-255字节</td>
<td>不超过 255 个字符的二进制字符串</td>
</tr>
<tr>
<td>TINYTEXT</td>
<td>0-255字节</td>
<td>短文本字符串</td>
</tr>
<tr>
<td>BLOB</td>
<td>0-65 535字节</td>
<td>二进制形式的长文本数据</td>
</tr>
<tr>
<td>TEXT</td>
<td>0-65 535字节</td>
<td>长文本数据</td>
</tr>
<tr>
<td>MEDIUMBLOB</td>
<td>0-16 777 215字节</td>
<td>二进制形式的中等长度文本数据</td>
</tr>
<tr>
<td>MEDIUMTEXT</td>
<td>0-16 777 215字节</td>
<td>中等长度文本数据</td>
</tr>
<tr>
<td>LONGBLOB</td>
<td>0-4 294 967 295字节</td>
<td>二进制形式的极大文本数据</td>
</tr>
<tr>
<td>LONGTEXT</td>
<td>0-4 294 967 295字节</td>
<td>极大文本数据</td>
</tr>
</tbody></table>
<h3 id="字段的约束条件"><a href="#字段的约束条件" class="headerlink" title="字段的约束条件"></a>字段的约束条件</h3><ul>
<li>NULL：数据列可包含NULL值；</li>
<li>NOT NULL：数据列不允许包含NULL值；</li>
<li>ZREOFILL: 零填充，当数据的显示长度不够的时候可以使用前补0的效果填充至指定长度,字段会自动添加UNSIGNED</li>
<li>DEFAULT：默认值；</li>
<li>PRIMARY KEY：KEY 主键；</li>
<li>UNIQUE KEY: 唯一性，一个表中可以有多个字段是唯一索引，同样的值不能重复，但是NULL值除外</li>
<li>AUTO_INCREMENT：自动递增，适用于整数类型；</li>
<li>UNSIGNED：是指数值类型只能为正数；</li>
<li>CHARACTER SET name：指定一个字符集；</li>
<li>COMMENT：对表或者字段说明；</li>
<li>FOREIGN KEY: 外键约束；</li>
</ul>
<blockquote>
<p><a href="http://blog.csdn.net/lipengcn/article/details/51111667" target="_blank" rel="noopener">http://blog.csdn.net/lipengcn/article/details/51111667</a></p>
</blockquote>
<blockquote>
<p><a href="https://github.com/jaywcjlove/mysql-tutorial/blob/master/21-minutes-MySQL-basic-entry.md" target="_blank" rel="noopener">https://github.com/jaywcjlove/mysql-tutorial/blob/master/21-minutes-MySQL-basic-entry.md</a></p>
</blockquote>
<blockquote>
<p><a href="http://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener">http://www.runoob.com/mysql/mysql-tutorial.html</a></p>
</blockquote>
<h2 id="sql查询操作命令"><a href="#sql查询操作命令" class="headerlink" title="sql查询操作命令"></a>sql查询操作命令</h2><h3 id="DISTINCT"><a href="#DISTINCT" class="headerlink" title="DISTINCT"></a>DISTINCT</h3><p>当从表中查询数据时，您可能会得到重复的行。为了删除这些重复行，可以在<code>SELECT</code>语句中使用<code>DISTINCT</code> 子句。</p>
<pre><code class="sql">SELECT  name FROM `test`

+------+
| name |
+------+
| tom  |
| amy  |
| tom  |
+------+

SELECT DISTINCT name FROM `test`;

+------+
| name |
+------+
| tom  |
| amy  |
+------+</code></pre>
<blockquote>
<p>如果查询多列数据，要每一个数据相同才会被删除。</p>
</blockquote>
<h3 id="ORDER-BY"><a href="#ORDER-BY" class="headerlink" title="ORDER BY"></a>ORDER BY</h3><p>语法：</p>
<pre><code class="sql">SELECT column1, column2,...
FROM tbl
ORDER BY column1 [ASC|DESC], column2 [ASC|DESC],...</code></pre>
<p>使用<code>ORDER BY</code>可以按照某个字段进行排序。<br>使用<code>ASC</code>或<code>DESC</code>按照升序或者降序排列。</p>
<pre><code class="sql">SELECT name FROM `test` GROUP BY name DESC;

+------+
| name |
+------+
| tom  |
| mus  |
| amy  |
+------+</code></pre>
<blockquote>
<p>默认是ASC升序。</p>
</blockquote>
<h3 id="WHERE"><a href="#WHERE" class="headerlink" title="WHERE"></a>WHERE</h3><p>在查询语句中使用<code>WHERE</code>语句来设定查询条件。</p>
<pre><code class="sql">SELECT * FROM test WHERE name=&#39;tom&#39;;
+-------------+------+-----+------+
| id          | name | ps  | code |
+-------------+------+-----+------+
| 00000000123 | tom  | abc | 2221 |
| 00000000125 | tom  | abc | 0133 |
+-------------+------+-----+------+</code></pre>
<blockquote>
<p>可以结合使用AND或OR的逻辑运算符。</p>
</blockquote>
<p>自定义排序函数FIELD():</p>
<pre><code class="sql">SELECT 
    orderNumber, status
FROM
    orders
ORDER BY FIELD(status,
        &#39;key_part1&#39;,
        &#39;key_part2&#39;);</code></pre>
<h3 id="IN"><a href="#IN" class="headerlink" title="IN"></a>IN</h3><p>在<code>WHERE</code>子句中，筛选符合匹配的数据。</p>
<pre><code class="sql">SELECT * FROM test WHERE name IN (&#39;tom&#39;);
+-------------+------+-----+------+
| id          | name | ps  | code |
+-------------+------+-----+------+
| 00000000123 | tom  | abc | 2221 |
| 00000000125 | tom  | abc | 0133 |
+-------------+------+-----+------+</code></pre>
<p>带有子查询的MySQL IN</p>
<pre><code class="sql">SELECT 
    orderNumber, customerNumber, status, shippedDate
FROM
    orders
WHERE
    orderNumber IN (SELECT 
            orderNumber
        FROM
            orderDetails
        GROUP BY orderNumber
        HAVING SUM(quantityOrdered * priceEach) &gt; 60000);</code></pre>
<p>运算顺序为：</p>
<pre><code class="sql">-- 第一步
SELECT 
    orderNumber
FROM
    orderDetails
GROUP BY orderNumber
HAVING SUM(quantityOrdered * priceEach) &gt; 60000;

-- 第二步
SELECT 
    orderNumber, customerNumber, status, shippedDate
FROM
    orders
WHERE
    orderNumber IN (10165,10287,10310);</code></pre>
<blockquote>
<p>having子句在查询过程中慢于聚合语句(sum,min,max,avg,count).而where子句在查询过程中则快于聚合语。</p>
</blockquote>
<h3 id="NOT-IN"><a href="#NOT-IN" class="headerlink" title="NOT IN"></a>NOT IN</h3><p>与<code>IN</code>运算符相反。</p>
<h3 id="BETWEEN-AND"><a href="#BETWEEN-AND" class="headerlink" title="BETWEEN AND"></a>BETWEEN AND</h3><p><code>BETWEEN AND</code>判断某字段值是否在给定的范围内。</p>
<pre><code class="sql">select * from where userId between 5 and 7;

-- 等同于

select * from user where userId &gt;= 5 and userId &lt;= 7;</code></pre>
<h3 id="LIKE"><a href="#LIKE" class="headerlink" title="LIKE"></a>LIKE</h3><p><code>LIKE</code>操作符常用在模式匹配中查询数据。</p>
<p>与LIKE操作符一起使用：百分比 %和下划线_。</p>
<ul>
<li>percent（%）通配符允许您匹配任何零个或多个字符的字符串。</li>
<li>下划线（_）通配符允许您匹配任何单个字符。</li>
</ul>
<pre><code class="sql">-- 查找m结尾的数据
SELECT 
    name
FROM
    employees
WHERE
    firstname LIKE &#39;%m&#39;;</code></pre>
<pre><code class="sql">-- 查找包含‘_20’字符的数据，ESCAPE 后面指定转义字符，默认为斜杠/
SELECT 
    productCode, productName
FROM
    products
WHERE
    productCode LIKE &#39;%$_20%&#39; ESCAPE &#39;$&#39;;</code></pre>
<h3 id="LIMIT"><a href="#LIMIT" class="headerlink" title="LIMIT"></a>LIMIT</h3><p><code>LIMIT</code>子句在<code>SELECT</code>语句中用于约束结果集中的行数。</p>
<pre><code class="sql">SELECT
    customernumber,
    customername,
    creditlimit
FROM
    customers
ORDER BY
    creditlimit DESC
LIMIT 3;

+----------------+------------------------------+-------------+
| customernumber | customername                 | creditlimit |
+----------------+------------------------------+-------------+
|            141 | Euro+ Shopping Channel       |   227600.00 |
|            124 | Mini Gifts Distributors Ltd. |   210500.00 |
|            298 | Vida Sport, Ltd              |   141300.00 |
+----------------+------------------------------+-------------+</code></pre>
<blockquote>
<p>如果LIMIT后还有参数，代表偏移量，从0开始。</p>
</blockquote>
<h3 id="IS-NULL"><a href="#IS-NULL" class="headerlink" title="IS NULL"></a>IS NULL</h3><p>判断数据是否为空，为NULL则返回true。</p>
<pre><code class="sql">SELECT 
    customerName, 
    country, 
    salesrepemployeenumber
FROM
    customers
WHERE
    salesrepemployeenumber IS NULL;</code></pre>
<blockquote>
<p><a href="http://www.manongjc.com/mysql_basic/mysql-tutorial-basic.html" target="_blank" rel="noopener">http://www.manongjc.com/mysql_basic/mysql-tutorial-basic.html</a></p>
</blockquote>
<h2 id="数据分组与连接"><a href="#数据分组与连接" class="headerlink" title="数据分组与连接"></a>数据分组与连接</h2><h3 id="GROUP-BY"><a href="#GROUP-BY" class="headerlink" title="GROUP BY"></a>GROUP BY</h3><p><code>GROUP BY</code>是<code>SELECT</code>的可选部分，将数据按表达式进行分组。</p>
<p>聚合函数允许我们执行某组行的计算并返回一个值。<code>GROUP BY</code>子句通常与聚合函数来执行计算，并为每个分组返回一个值。</p>
<pre><code class="sql">SELECT status,count(*) as total  from orders GROUP BY `status` ;

+------------+----------+
| status     | total    |
+------------+----------+
| Cancelled  |        6 |
| Disputed   |        3 |
| In Process |        6 |
| On Hold    |        4 |
| Resolved   |        4 |
| Shipped    |      303 |
+------------+----------+</code></pre>
<h2 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h2><h3 id="INNER-JOIN"><a href="#INNER-JOIN" class="headerlink" title="INNER JOIN"></a>INNER JOIN</h3><p>产生的结果集中，是两者某字段的交集。可以简写成<code>join</code>;</p>
<pre><code class="sql">-- Table A 是左边的表。
-- Table B 是右边的表。
id name       id  name
-- ----       --  ----
1  **Pirate**     1   Rutabaga
2  Monkey         2   **Pirate**
3  **Ninja**      3   Darth Vader
4  Spaghetti      4   **Ninja**</code></pre>
<pre><code class="sql">SELECT * FROM TableA
INNER JOIN TableB
ON TableA.name = TableB.name

-- 结果:
id  name       id   name
--  ----       --   ----
1   Pirate     2    Pirate
3   Ninja      4    Ninja</code></pre>
<p><img src="C:/Users/Administrator/Desktop/My-study-records-master/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/img/Inner_Join.png" alt="img/Inner_Join.png"></p>
<p><code>JOIN</code>子句必须指定连接条件，连接条件的关键字<code>ON</code>在<code>INNER JOIN</code>语句之后。连接条件是用于在主表和其他表之间匹配行的条件。</p>
<h3 id="LEFT-JOIN"><a href="#LEFT-JOIN" class="headerlink" title="LEFT JOIN"></a>LEFT JOIN</h3><p>产生表A的完全集，而B表中匹配的则有值，没有匹配的则以null值取代。</p>
<pre><code class="sql">SELECT * FROM TableA
LEFT JOIN TableB
ON TableA.name = TableB.name

-- 结果
id  name       id    name
--  ----       --    ----
1   Pirate     2     Pirate
2   Monkey     null  null
3   Ninja      4     Ninja
4   Spaghetti  null  null</code></pre>
<p><img src="C:/Users/Administrator/Desktop/My-study-records-master/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/img/Left_Outer_Join.png" alt="img/Left_Outer_Join.png"></p>
<h3 id="RIGHT-JOIN"><a href="#RIGHT-JOIN" class="headerlink" title="RIGHT JOIN"></a>RIGHT JOIN</h3><p>产生表B的完全集，而A表中匹配的则有值，没有匹配的则以null值取代。</p>
<pre><code class="sql">SELECT * FROM TableA
RIGHT  JOIN TableB 
ON TableA.name = TableB.name ORDER BY TableB.name;

-- 结果
+------+-------------+----+-------------------+
| id   | name        | id | name              |
+------+-------------+----+-------------------+
| NULL | NULL        |  1 | Rutabaga          |
|    4 | Pirate      |  2 | Pirate            |
| NULL | NULL        |  3 | Darth Vader       |
|    6 | Ninja       |  4 | Ninja             |
+------+-------------+----+-------------------+</code></pre>
<blockquote>
<p>在sql查询语句中，还有FULL JOIN，但MySQL中没有支持。<br>具体可参考：<a href="https://code.ziqiangxuetang.com/sql/sql-join-full.html" target="_blank" rel="noopener">https://code.ziqiangxuetang.com/sql/sql-join-full.html</a></p>
</blockquote>
<blockquote>
<p>教程：<a href="http://www.manongjc.com/mysql_basic/mysql-tutorial-basic.html" target="_blank" rel="noopener">http://www.manongjc.com/mysql_basic/mysql-tutorial-basic.html</a></p>
</blockquote>
<h2 id="字段处理"><a href="#字段处理" class="headerlink" title="字段处理"></a>字段处理</h2><h3 id="修改字段名"><a href="#修改字段名" class="headerlink" title="修改字段名"></a>修改字段名</h3><pre><code class="sql">ALTER TABLE 表名 Change 旧属性名 新属性名 新数据类型;</code></pre>
<h3 id="修改字段的数据类型"><a href="#修改字段的数据类型" class="headerlink" title="修改字段的数据类型"></a>修改字段的数据类型</h3><pre><code class="sql">ALTER TABLE 表名 MODIFY 属性名 新数据类型;</code></pre>
<h3 id="增加字段"><a href="#增加字段" class="headerlink" title="增加字段"></a>增加字段</h3><pre><code class="sql">ALTER TABLE 表名 ADD 属性名1 数据类型 [完整性约束条件] [FIRST | AFTER 属性名2];</code></pre>
<h3 id="删除字段"><a href="#删除字段" class="headerlink" title="删除字段"></a>删除字段</h3><pre><code class="sql">ALTER TABLE 表名 DROP 属性名;</code></pre>
<blockquote>
<p>参考：<a href="http://blog.csdn.net/lipengcn/article/details/51119535" target="_blank" rel="noopener">http://blog.csdn.net/lipengcn/article/details/51119535</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zqfmcl.github.io/dialy/2019/10/04/2019-10-04-Nim-Game[E]/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zqfmcl">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fey's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/2019-10-04-Nim-Game[E]/" itemprop="url">Nim Game[E]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T10:00:00+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="292-Nim-Game-E"><a href="#292-Nim-Game-E" class="headerlink" title="292. Nim Game[E]"></a>292. Nim Game[E]</h2><hr>
<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>You are playing the following Nim Game with your friend: There is a heap of stones on the table, each time one of you take turns to remove 1 to 3 stones. The one who removes the last stone will be the winner. You will take the first turn to remove the stones.</p>
<p>Both of you are very clever and have optimal strategies for the game. Write a function to determine whether you can win the game given the number of stones in the heap.</p>
<p>For example, if there are 4 stones in the heap, then you will never win the game: no matter 1, 2, or 3 stones you remove, the last stone will always be removed by your friend. </p>
<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><ol>
<li>只要能被4整除，你就输了。因为不论你怎么拿，对方都会凑到4。</li>
<li>如果不能被4整除，那你第一次把余数拿了，然后你模仿上面的策略，你就赢了。</li>
</ol>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><pre><code class="python">return bool(n%4)</code></pre>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zqfmcl.github.io/dialy/2019/10/04/2019-10-04-Mysql大全/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zqfmcl">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fey's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/2019-10-04-Mysql大全/" itemprop="url">Mysql大全</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T10:00:00+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

<ul>
<li><a href="#深入浅出mysql数据库">深入浅出MySQL数据库</a><ul>
<li><a href="#1-什么是数据库">1、什么是数据库？</a><ul>
<li><a href="#数据库database是按照数据结构来组织-存储和管理数据的仓库">数据库(Database)是按照数据结构来组织、存储和管理数据的仓库</a></li>
<li><a href="#常见数据库">常见数据库</a></li>
<li><a href="#相关术语">相关术语</a></li>
</ul>
</li>
<li><a href="#2-mysql相关操作">2、MySQL相关操作</a><ul>
<li><a href="#配置文件">配置文件</a></li>
<li><a href="#登陆退出mysql">登陆/退出MySQL</a></li>
<li><a href="#sql语句语法规范">SQL语句语法规范</a></li>
<li><a href="#常用sql语句">常用SQL语句</a></li>
</ul>
</li>
<li><a href="#3-数据库相关操作">3、数据库相关操作</a><ul>
<li><a href="#创建数据库">创建数据库</a></li>
<li><a href="#查看当前服务器下全部数据库">查看当前服务器下全部数据库</a></li>
<li><a href="#查看指定数据库的详细信息">查看指定数据库的详细信息</a></li>
<li><a href="#修改指定数据库的编码方式">修改指定数据库的编码方式</a></li>
<li><a href="#打开指定数据库">打开指定数据库</a></li>
<li><a href="#得到当前打开的数据库">得到当前打开的数据库</a></li>
<li><a href="#删除指定的数据库">删除指定的数据库</a></li>
</ul>
</li>
<li><a href="#4-数据表相关操作">4、数据表相关操作</a><ul>
<li><a href="#数据表">数据表</a></li>
<li><a href="#创建表">创建表</a></li>
<li><a href="#查看当前数据库下已有数据表">查看当前数据库下已有数据表</a></li>
<li><a href="#查看指定数据表的详细信息">查看指定数据表的详细信息</a></li>
<li><a href="#查看表结构">查看表结构</a></li>
<li><a href="#删除指定的数据表">删除指定的数据表</a></li>
<li><a href="#表结构相关操作">表结构相关操作</a></li>
</ul>
</li>
<li><a href="#5-mysql中的数据类型">5、MySQL中的数据类型</a><ul>
<li><a href="#数值型">数值型</a></li>
<li><a href="#字符串类型">字符串类型</a></li>
<li><a href="#日期时间类型">日期时间类型</a></li>
<li><a href="#二进制类型">二进制类型</a></li>
</ul>
</li>
<li><a href="#6-mysql存储引擎">6、MySQL存储引擎</a><ul>
<li><a href="#mysql架构图">MySQL架构图</a></li>
<li><a href="#mysql存储引擎">MySQL存储引擎</a></li>
</ul>
</li>
<li><a href="#7-mysql数据操作">7、MySQL数据操作</a><ul>
<li><a href="#添加记录">添加记录</a></li>
<li><a href="#修改记录">修改记录</a></li>
<li><a href="#删除记录">删除记录</a></li>
<li><a href="#查询记录">查询记录</a></li>
<li><a href="#多表查询">多表查询</a></li>
<li><a href="#外键约束">外键约束</a></li>
<li><a href="#特殊形式的查询">特殊形式的查询</a></li>
</ul>
</li>
<li><a href="#8-mysql常用函数">8、MYSQL常用函数</a><ul>
<li><a href="#数学函数">数学函数</a></li>
<li><a href="#字符串函数">字符串函数</a></li>
<li><a href="#日期时间函数">日期时间函数</a></li>
<li><a href="#其它常用函数">其它常用函数</a></li>
</ul>
</li>
<li><a href="#9-图形化工具管理数据库">9、图形化工具管理数据库</a><ul>
<li><a href="#bs">BS</a></li>
<li><a href="#cs">CS</a></li>
</ul>
</li>
<li><a href="#常用sql语句-1">常用SQL语句</a><ul>
<li><a href="#查看上一步操作产生的警告信息">查看上一步操作产生的警告信息</a></li>
<li><a href="#mysql中的注释">mysql中的注释</a></li>
<li><a href="#检测表">检测表</a></li>
<li><a href="#修复表">修复表</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- /code_chunk_output -->

<h1 id="深入浅出MySQL数据库"><a href="#深入浅出MySQL数据库" class="headerlink" title="深入浅出MySQL数据库"></a>深入浅出MySQL数据库</h1><h2 id="1、什么是数据库？"><a href="#1、什么是数据库？" class="headerlink" title="1、什么是数据库？"></a>1、什么是数据库？</h2><h3 id="数据库-Database-是按照数据结构来组织、存储和管理数据的仓库"><a href="#数据库-Database-是按照数据结构来组织、存储和管理数据的仓库" class="headerlink" title="数据库(Database)是按照数据结构来组织、存储和管理数据的仓库"></a>数据库(Database)是按照数据结构来组织、存储和管理数据的仓库</h3><h3 id="常见数据库"><a href="#常见数据库" class="headerlink" title="常见数据库"></a>常见数据库</h3><ul>
<li>Oracle</li>
<li>DB2</li>
<li>SQL Server</li>
<li>Postgre SQL</li>
<li>MySQL</li>
</ul>
<h3 id="相关术语"><a href="#相关术语" class="headerlink" title="相关术语"></a>相关术语</h3><ul>
<li>数据库系统(Database System):DBS<ul>
<li>数据库(Database)</li>
<li>数据库管理系统(Database Management System):DBMS</li>
<li>应用开发工具</li>
<li>管理员及用户</li>
</ul>
</li>
<li>SQL语言<ul>
<li>Structured Query Language：结构化查询与颜<ul>
<li>DDL<ul>
<li>数据定义语言</li>
</ul>
</li>
<li>DML<ul>
<li>数据操作语言</li>
</ul>
</li>
<li>DQL<ul>
<li>数据查询语言</li>
</ul>
</li>
<li>DCL<ul>
<li>数据控制语言</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2、MySQL相关操作"><a href="#2、MySQL相关操作" class="headerlink" title="2、MySQL相关操作"></a>2、MySQL相关操作</h2><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><ul>
<li>my.cnf是MySQL的配置文件</li>
</ul>
<h3 id="登陆-退出MySQL"><a href="#登陆-退出MySQL" class="headerlink" title="登陆/退出MySQL"></a>登陆/退出MySQL</h3><ul>
<li>登陆<ul>
<li>mysql -uroot -p</li>
<li>mysql -uroot -proot</li>
<li>mysql -hlocalhost -uroot -p -P3306</li>
<li>登陆的同时修改密令提示符<ul>
<li>mysql -uroot -p –prompt=命令提示符<ul>
<li>\h<ul>
<li>主机</li>
</ul>
</li>
<li>\u<ul>
<li>当前登陆的用户</li>
</ul>
</li>
<li>\d<ul>
<li>当前打开的数据库</li>
</ul>
</li>
<li>\D<ul>
<li>当前服务器的日期时间</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>得到版本号<ul>
<li>mysql -V</li>
<li>mysql –version</li>
</ul>
</li>
<li>登陆的同时打开指定数据库<ul>
<li>mysql -uroot -p -D db_name</li>
</ul>
</li>
</ul>
</li>
<li>退出<ul>
<li>exit</li>
<li>quit</li>
<li>\q</li>
<li>ctrl+c</li>
</ul>
</li>
<li>登陆信息中需要掌握的<ul>
<li>命令行结束符默认使用;或者\g来结束</li>
<li>可以通过help或者\h或者?加上相关关键字来查看手册</li>
<li>\c可以取消当前命令的执行</li>
</ul>
</li>
</ul>
<h3 id="SQL语句语法规范"><a href="#SQL语句语法规范" class="headerlink" title="SQL语句语法规范"></a>SQL语句语法规范</h3><ul>
<li>常用MySQL的关键字我们需要大写，库名、表名、字段名称等使用小写</li>
<li>SQL语句支持折行操作，拆分的时候不能把完整单词拆开</li>
<li>数据库名称、表名称、字段名称不要使用MySQL的保留字，如果必须要使用，需要用反引号``将其括起来</li>
</ul>
<h3 id="常用SQL语句"><a href="#常用SQL语句" class="headerlink" title="常用SQL语句"></a>常用SQL语句</h3><ul>
<li>SELECT USER()<ul>
<li>得到登陆的用户</li>
</ul>
</li>
<li>SELECT VERSION()<ul>
<li>得到MySQL的版本信息</li>
</ul>
</li>
<li>SELECT NOW()<ul>
<li>得到当前的日期时间</li>
</ul>
</li>
<li>SELECT DATABASE()<ul>
<li>得到当前打开的数据库</li>
</ul>
</li>
</ul>
<h2 id="3、数据库相关操作"><a href="#3、数据库相关操作" class="headerlink" title="3、数据库相关操作"></a>3、数据库相关操作</h2><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><ul>
<li>CREATE {DATABASE|SCHEMA} db_name;</li>
<li>检测数据库名称是否存在，不存在则创建<ul>
<li>CREATE DATABASE [IF NOT EXISTS] db_name;</li>
</ul>
</li>
<li>在创建数据库的同时指定编码方式<ul>
<li>CREATE DATABASE [IF NOT EXISTS] db_name [DEFAULT] CHARACTER SET [=] charset;</li>
</ul>
</li>
<li>注意<ul>
<li>数据库名称最好有意义</li>
<li>名称不要包含特殊字符或者是MySQL关键字</li>
</ul>
</li>
</ul>
<h3 id="查看当前服务器下全部数据库"><a href="#查看当前服务器下全部数据库" class="headerlink" title="查看当前服务器下全部数据库"></a>查看当前服务器下全部数据库</h3><ul>
<li>SHOW DATABASES|SCHEMAS;</li>
</ul>
<h3 id="查看指定数据库的详细信息"><a href="#查看指定数据库的详细信息" class="headerlink" title="查看指定数据库的详细信息"></a>查看指定数据库的详细信息</h3><ul>
<li>SHOW CREATE DATABASE db_name;</li>
</ul>
<h3 id="修改指定数据库的编码方式"><a href="#修改指定数据库的编码方式" class="headerlink" title="修改指定数据库的编码方式"></a>修改指定数据库的编码方式</h3><ul>
<li>ALTER DATABASE db_name [DEFAULT] CHARACTER SET [=] charset;</li>
</ul>
<h3 id="打开指定数据库"><a href="#打开指定数据库" class="headerlink" title="打开指定数据库"></a>打开指定数据库</h3><ul>
<li>USE db_name;</li>
</ul>
<h3 id="得到当前打开的数据库"><a href="#得到当前打开的数据库" class="headerlink" title="得到当前打开的数据库"></a>得到当前打开的数据库</h3><ul>
<li>SELECT DATABASE()|SCHEMA();</li>
</ul>
<h3 id="删除指定的数据库"><a href="#删除指定的数据库" class="headerlink" title="删除指定的数据库"></a>删除指定的数据库</h3><ul>
<li>DROP DATABASE db_name;</li>
<li>如果数据库存在则删除<ul>
<li>DROP DATABASE [IF EXISTS] db_name;</li>
</ul>
</li>
</ul>
<h2 id="4、数据表相关操作"><a href="#4、数据表相关操作" class="headerlink" title="4、数据表相关操作"></a>4、数据表相关操作</h2><h3 id="数据表"><a href="#数据表" class="headerlink" title="数据表"></a>数据表</h3><ul>
<li>是数据库最重要的组成部分之一，数据是保存在数据表中</li>
<li>数据表由行(row)和列(column)来组成</li>
<li>每个数据表中至少有一列，行可以有零行一行或者多行组成</li>
<li>表名要求唯一，不要包含特殊字符，最好含义明确</li>
</ul>
<h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><ul>
<li>CREATE TABLE [IF NOT EXISTS] tbl_name(<br>字段名称 字段类型 [完整性约束条件],<br>字段名称 字段类型 [完整性约束条件],<br>…<br>)ENGINE=存储引擎 CHARSET=编码方式;<ul>
<li>UNSIGNED<ul>
<li>无符号，没有负数，从0开始</li>
</ul>
</li>
<li>ZEROFILL<ul>
<li>零填充，当数据的显示长度不够的时候可以使用前补0的效果填充至指定长度,字段会自动添加UNSIGNED</li>
</ul>
</li>
<li>NOT NULL<ul>
<li>非空约束，也就是插入值的时候这个字段必须要给值,值不能为空</li>
</ul>
</li>
<li>DEFAULT<ul>
<li>默认值，如果插入记录的时候没有给字段赋值，则使用默认值</li>
</ul>
</li>
<li>PRIMARY KEY<ul>
<li>主键，标识记录的唯一性，值不能重复，一个表只能有一个主键，自动禁止为空</li>
</ul>
</li>
<li>AUTO_INCREMENT<ul>
<li>自动增长，只能用于数值列，而且配合索引使用,默认起始值从1开始，每次增长1</li>
</ul>
</li>
<li>UNIQUE KEY<ul>
<li>唯一性，一个表中可以有多个字段是唯一索引，同样的值不能重复，但是NULL值除外</li>
</ul>
</li>
<li>FOREIGN KEY<ul>
<li>外键约束</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="查看当前数据库下已有数据表"><a href="#查看当前数据库下已有数据表" class="headerlink" title="查看当前数据库下已有数据表"></a>查看当前数据库下已有数据表</h3><ul>
<li>SHOW TABLES;</li>
<li>SHOW [FULL] TABLES [{FROM | IN} db_name]<br>[LIKE ‘pattern’ | WHERE expr]</li>
</ul>
<h3 id="查看指定数据表的详细信息"><a href="#查看指定数据表的详细信息" class="headerlink" title="查看指定数据表的详细信息"></a>查看指定数据表的详细信息</h3><ul>
<li>SHOW CREATE TABLE tbl_name;</li>
</ul>
<h3 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h3><ul>
<li>DESC tbl_name;</li>
<li>DESCRIBE tbl_name;</li>
<li>SHOW COLUMNS FROM tbl_name;</li>
</ul>
<h3 id="删除指定的数据表"><a href="#删除指定的数据表" class="headerlink" title="删除指定的数据表"></a>删除指定的数据表</h3><ul>
<li>DROP TABLE [IF EXISTS] tbl_name;</li>
</ul>
<h3 id="表结构相关操作"><a href="#表结构相关操作" class="headerlink" title="表结构相关操作"></a>表结构相关操作</h3><ul>
<li>添加字段<ul>
<li>ALTER TABLE tbl_name<br>ADD 字段名称 字段属性 [完整性约束条件][FIRST|AFTER 字段名称]</li>
</ul>
</li>
<li>删除字段<ul>
<li>ALTER TABLE tbl_name<br>DROP 字段名称</li>
</ul>
</li>
<li>添加默认值<ul>
<li>ALTER TABLE tbl_name<br>ALTER 字段名称 SET DEFAULT 默认值;</li>
</ul>
</li>
<li>删除默认值<ul>
<li>ALTER TABLE tbl_name<br>ALTER 字段名称 DROP DEFAULT</li>
</ul>
</li>
<li>修改字段类型、字段属性<ul>
<li>ALTER TABLE tbl_name<br>MODIFY 字段名称 字段类型 [字段属性][FIRST | AFTER 字段名称]</li>
</ul>
</li>
<li>修改字段名称、字段类型、字段属性<ul>
<li>ALTER TABLE tbl_name<br>CHANGE 原字段名称 新字段名称 字段类型 字段属性 [FIRST | AFTER 字段名称]</li>
</ul>
</li>
<li>添加主键<ul>
<li>ALTER TABLE tbl_name<br>ADD PRIMARY KEY(字段名称)</li>
</ul>
</li>
<li>删除主键<ul>
<li>ALTER TABLE tbl_name<br>DROP PRIMARY KEY;</li>
</ul>
</li>
<li>添加唯一<ul>
<li>ALTER TABLE tbl_name<br>ADD UNIQUE KEY|INDEX [index_name] (字段名称)</li>
</ul>
</li>
<li>删除唯一<ul>
<li>ALTER TABLE tbl_name<br>DROP index_name;</li>
</ul>
</li>
<li>修改数据表名称<ul>
<li>ALTER TABLE tbl_name<br>RENAME [TO|AS] new_tbl_name</li>
<li>RENAME TABLE tbl_name TO new_tbl_name;</li>
</ul>
</li>
<li>修改AUTO_INCREMENT的值<ul>
<li>ALTER TABLE tbl_name AUTO_INCREMENT=值</li>
</ul>
</li>
</ul>
<h2 id="5、MySQL中的数据类型"><a href="#5、MySQL中的数据类型" class="headerlink" title="5、MySQL中的数据类型"></a>5、MySQL中的数据类型</h2><h3 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h3><ul>
<li>整数型<br><img src="C:/Users/Administrator/Desktop/My-study-records-master/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/img/mysql_int.jpg" alt></li>
<li>浮点型<br><img src="C:/Users/Administrator/Desktop/My-study-records-master/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/img/mysql_float.jpg" alt></li>
</ul>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><p><img src="C:/Users/Administrator/Desktop/My-study-records-master/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/img/mysql_str.jpg" alt></p>
<ul>
<li>CHAR效率高于VARCHAR,CHAR相当于拿空间换时间，VARCHAR拿时间换空间</li>
<li>CHAR默认存储数据的时候，后面会用空格填充到指定长度；而在检索的时候会去掉后面空格；VARCHAR在保存的时候不进行填充，尾部的空格会留下</li>
<li>TEXT列不能有默认值,检索的时候不存在大小写转换</li>
</ul>
<h3 id="日期时间类型"><a href="#日期时间类型" class="headerlink" title="日期时间类型"></a>日期时间类型</h3><p><img src="C:/Users/Administrator/Desktop/My-study-records-master/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/img/mysql_time.jpg" alt></p>
<h3 id="二进制类型"><a href="#二进制类型" class="headerlink" title="二进制类型"></a>二进制类型</h3><h2 id="6、MySQL存储引擎"><a href="#6、MySQL存储引擎" class="headerlink" title="6、MySQL存储引擎"></a>6、MySQL存储引擎</h2><h3 id="MySQL架构图"><a href="#MySQL架构图" class="headerlink" title="MySQL架构图"></a>MySQL架构图</h3><ul>
<li>MySQL是由SQL接口、解析器、优化器、缓存和存储引擎组成。<ul>
<li>Connectors<ul>
<li>指的是不同语言与SQL的交互接口</li>
</ul>
</li>
<li>Management Serivices &amp; Utillities<ul>
<li>系统管理和工具</li>
</ul>
</li>
<li>Connection Pool<ul>
<li>连接池，管理缓冲用户连接，线程处理等需要缓存的需求</li>
</ul>
</li>
<li>SQL Interface<ul>
<li>接收用户的SQL指令，并且返回需要查询的结果。</li>
</ul>
</li>
<li>Parser<ul>
<li>解析器。</li>
</ul>
</li>
<li>Optimizer<ul>
<li>查询优化器<ul>
<li>选取-投影-联接<ul>
<li>SELECT  id,username FROM  user WHERE age&gt;10;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Caches &amp; Buffers<ul>
<li>查询缓存</li>
</ul>
</li>
<li>Engine<ul>
<li>存储引擎</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="MySQL存储引擎"><a href="#MySQL存储引擎" class="headerlink" title="MySQL存储引擎"></a>MySQL存储引擎</h3><ul>
<li>存储引擎就是指表的类型，存取和处理数据的方式。</li>
<li>查看当前支持的存储引擎<ul>
<li>SHOW ENGINES;<ul>
<li>ENGINE<ul>
<li>存储引擎名称</li>
</ul>
</li>
<li>SUPPORT<ul>
<li>是否支持此存储引擎</li>
</ul>
</li>
<li>COMMENT<ul>
<li>存储引擎的注释</li>
</ul>
</li>
<li>TRANSACTIONS<ul>
<li>是否支持事务</li>
</ul>
</li>
<li>XA<ul>
<li>是否支持分布式交易处理的XA规范</li>
</ul>
</li>
<li>SAVEPOINTS<ul>
<li>是否支持保存点，以便事务回滚刀保存点</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>查看默认的存储引擎<ul>
<li>SHOW VARIABLES LIKES ‘storage_engine’;</li>
</ul>
</li>
<li>存储引擎分类<ul>
<li>MEMORY存储引擎<ul>
<li>数据保存在内存中，读写效率高</li>
<li>磁盘中产生一个以表明为名称.frm文件，只保存表结构</li>
<li>如果关闭MySQL服务，此时数据会产生丢失</li>
<li>max_heap_table_size默认16MB</li>
</ul>
</li>
<li>CSV存储引擎<ul>
<li>CSV存储引擎字段不支持NULL，所有的的列必须设置成NOT NULL</li>
<li>CSV存储引擎不支持索引，也不支持分区</li>
<li>.csv结尾的文件是保存数据的文件</li>
<li>.csm结尾的文件是元信息文件，保存表的状态及存储的数据量</li>
</ul>
</li>
<li>ARCHIVE存储引擎<ul>
<li>适合对于不经常访问又删除不了的数据做归档存储</li>
<li>.frm文件结构文件，.arz数据文件</li>
<li>插入效率很高，而且占用空间小</li>
<li>ARCHIVE存储引擎只支持INSERT和SELECT 操作，不支持UPDATE/DELETE/REPLACE操作</li>
</ul>
</li>
<li>MyISAM存储引擎<ul>
<li>默认MyISAM的表会在磁盘中产生3个文件<ul>
<li>.frm<ul>
<li>表结构文件</li>
</ul>
</li>
<li>.MYD<ul>
<li>数据文件</li>
</ul>
</li>
<li>.MYI<ul>
<li>索引文件</li>
</ul>
</li>
</ul>
</li>
<li>可以在创建表的时候指定数据文件和索引文件存储位置，只有MyISAM表支持<ul>
<li>DATA DIRECORY [=] 数据保存的绝对路径</li>
<li>INDEX DIRECTORY [=] 索引文件保存的绝对路径</li>
</ul>
</li>
<li>MyISAM单表最大支持的数据量2的64次方条记录</li>
<li>每个表最多可以建立64个索引</li>
<li>如果是复合索引，每个复合索引最多包含16个列，索引值最大长度是1000B</li>
<li>MyISAM引擎的存储格式<ul>
<li>定长(FIXED 静态) <ul>
<li>是指字段中不包含VARCHAR/TEXT/BLOB</li>
</ul>
</li>
<li>动态(DYNAMIC)<ul>
<li>只要字段中包含了VARCHAR/TEXT/BLOB</li>
</ul>
</li>
<li>压缩(COMPRESSED)<ul>
<li>myisampack创建</li>
</ul>
</li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>InnoDB存储引擎<ul>
<li>设计遵循ACID模型，支持事务，具有从服务崩溃中恢复的能力，能够最大限度保护用户的数据<ul>
<li>原子性(Atomiocity)</li>
<li>一致性(Consistency)</li>
<li>隔离性(Isolation)</li>
<li>持久性(Durability)</li>
</ul>
</li>
<li>支持行级锁，可以提升多用户并发时的读写性能</li>
<li>支持外键，保证数据的一致性和完整性</li>
<li>InnoDB拥有自己独立的缓冲池，常用的数据和索引都在缓存中</li>
<li>对于INSERT、UPDATE、DELETE操作，InnoDB会使用一种change buffering的机制来自动优化，还可以提供一致性的读，并且还能够缓存变更的数据，减少磁盘I/O，提高性能</li>
<li><ul>
<li>Storage Limits<ul>
<li>存储能力，64TB</li>
</ul>
</li>
<li>MVCC<ul>
<li>MVCC是一种多版本并发控制机制</li>
</ul>
</li>
<li>B-Tree indexes<ul>
<li>支持B-Tree索引</li>
</ul>
</li>
<li>Full-text search indexes<ul>
<li>支持</li>
</ul>
</li>
<li>backup/point-in-time recovery<ul>
<li>备份/时间点恢复，支持</li>
</ul>
</li>
<li>Geospatial data type support<ul>
<li>支持地理数据</li>
</ul>
</li>
</ul>
</li>
<li>创建InnoDB表之后会产生两个文件<ul>
<li>.frm表结构文件</li>
<li>.ibd，数据和索引存储表空间中</li>
</ul>
</li>
<li>所有的表都需要创建主键，最好是配合上AUTO_INCREMENT,也可以放到经常查询的列作为主键</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="7、MySQL数据操作"><a href="#7、MySQL数据操作" class="headerlink" title="7、MySQL数据操作"></a>7、MySQL数据操作</h2><h3 id="添加记录"><a href="#添加记录" class="headerlink" title="添加记录"></a>添加记录</h3><ul>
<li>INSERT [INTO] tbl_name[(col_name,…)] {VALUE|VALUES}(VALUES…);</li>
<li>不指定字段名称<ul>
<li>INSERT tbl_name VALUE(value…)</li>
<li>需要按照建表时的字段顺序给每一个字段赋值</li>
</ul>
</li>
<li>列出指定字段<ul>
<li>INSERT tbl_name(字段名称,…) VALUES(值,…)</li>
</ul>
</li>
<li>INSERT … SET的形式<ul>
<li>INSERT tbl_name SET 字段名称=值,…;</li>
</ul>
</li>
<li>INSERT … SELECT<ul>
<li>INSERT tbl_name[(字段名称…)] SELECT 字段名称,… FROM  tbl_name [WHERE 条件]</li>
</ul>
</li>
<li>一次添加多条记录<ul>
<li>INSERT tbl_name[(字段名称,…)] VALUES(值,…),<br>(值,….),<br>(值,…)</li>
</ul>
</li>
</ul>
<h3 id="修改记录"><a href="#修改记录" class="headerlink" title="修改记录"></a>修改记录</h3><ul>
<li>UPDATE tbl_name SET 字段名称=值,字段名称=值 [WHERE 条件]</li>
<li>如果不添加条件，整个表中的记录都会被更新</li>
</ul>
<h3 id="删除记录"><a href="#删除记录" class="headerlink" title="删除记录"></a>删除记录</h3><ul>
<li>DELETE FROM tbl_name [WHERE 条件]</li>
<li>如果不添加条件，表中所有记录都会被删除</li>
<li>DELETE 清空数据表的时候不会重置AUTO_INCREMENT的值，可以通过ALTER 语句将其重置为1</li>
<li>彻底清空数据表<ul>
<li>TRUNCATE [TABLE] tbl_name;<ul>
<li>清除表中所有记录</li>
<li>会重置AUTO_INCREMENT的值</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="查询记录"><a href="#查询记录" class="headerlink" title="查询记录"></a>查询记录</h3><ul>
<li><p>SELECT select_expr,… FROM tbl_name<br>[WHERE 条件]<br>[GROUP BY {col_name|position} HAVING 二次筛选]<br>[ORDER BY {col_name|position|expr} [ASC|DESC]]<br>[LIMIT 限制结果集的显示条数] </p>
</li>
<li><p>查询表中所有记录</p>
<ul>
<li>SELECT * FROM tbl_name;<ul>
<li>*所有字段</li>
</ul>
</li>
</ul>
</li>
<li><p>指定字段的信息</p>
<ul>
<li>SELECT 字段名称,… FROM tbl_name</li>
</ul>
</li>
<li><p>库名.表名</p>
<ul>
<li>SELECT 字段名称,… FROM db_name.tbl_name;</li>
</ul>
</li>
<li><p>给字段起别名</p>
<ul>
<li>SELECT 字段名称 [AS] 别名名称,… FROM db_name.tbl_name; </li>
</ul>
</li>
<li><p>给数据表起别名</p>
<ul>
<li>SELECT 字段名称 ,… FROM tbl_name [AS] 别名;</li>
</ul>
</li>
<li><p>表名.字段名的</p>
<ul>
<li>SELECT tbl_name.col_name,… FROM tbl_name;</li>
</ul>
</li>
<li><p>WHERE 条件</p>
<ul>
<li><p>会筛选出符合条件的记录</p>
<ul>
<li><p>比较运算符</p>
<ul>
<li><blockquote>
<p>、&gt;= 、&lt;、 &lt;=、 !=、 &lt;&gt;、 &lt;=&gt;</p>
</blockquote>
</li>
<li><p><code>=</code> 与 <code>&lt;=&gt;</code>相似，&lt;=&gt;可以检测NULL值</p>
</li>
<li><p>不等于运算符 &lt;&gt; 或者 !=</p>
</li>
</ul>
</li>
<li><p>IS [NOT] NULL</p>
<ul>
<li>检测值是否为NULL或者NOT NULL</li>
</ul>
</li>
<li><p>指定范围</p>
<ul>
<li>[NOT] BETWEEN … AND</li>
</ul>
</li>
<li><p>指定集合</p>
<ul>
<li>[NOT] IN(值,…)</li>
</ul>
</li>
<li><p>逻辑运算符</p>
<ul>
<li>AND<ul>
<li>逻辑与</li>
</ul>
</li>
<li>OR<ul>
<li>逻辑或</li>
</ul>
</li>
</ul>
</li>
<li><p>匹配字符</p>
<ul>
<li>[NOT] LIKE</li>
<li>%<ul>
<li>任意长度的字符串</li>
</ul>
</li>
<li>_<ul>
<li>任意一个字符</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>GROUP BY 分组</p>
<ul>
<li>把值相同放到一个组中，最终查询出的结果只会显示组中一条记录</li>
<li>分组配合GROUP_CONCAT()查看组中某个字段的详细信息</li>
<li>配合聚合函数使用<ul>
<li>COUNT()<ul>
<li>统计记录总数</li>
<li>如果写的是COUNT(字段名称)，字段中的值为NULL，不统计进来</li>
<li>写COUNT(*)会统计NULL值</li>
</ul>
</li>
<li>SUM()<ul>
<li>求和</li>
</ul>
</li>
<li>MAX()<ul>
<li>求最大值</li>
</ul>
</li>
<li>MIN()<ul>
<li>求最小值</li>
</ul>
</li>
<li>AVG()<ul>
<li>求平均值</li>
</ul>
</li>
</ul>
</li>
<li>配合WITH ROLLUP关键使用<ul>
<li>会在记录末尾添加一条记录，是上面所有记录的总和</li>
</ul>
</li>
<li>HAVING子句对分组结果进行二次筛选</li>
</ul>
</li>
<li><p>ORDER BY 排序</p>
<ul>
<li>ORDER BY 字段名称 ASC|DESC</li>
</ul>
</li>
<li><p>LIMIT 限制结果集显示条数</p>
<ul>
<li>LIMIT 值<ul>
<li>显示结果集的前几条记录</li>
</ul>
</li>
<li>LIMIT offset,row_count<ul>
<li>从offset开始，显示几条记录,offset从0开始</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h3><ul>
<li>笛卡尔积的形式</li>
<li>内连接的形式<ul>
<li>查询两个表中符合连接条件的记录</li>
<li>SELECT 字段名称,… FROM tbl_name1<br>INNER JOIN tbl_name2<br>ON 连接条件</li>
</ul>
</li>
<li>外连接的形式<ul>
<li>左外连接<ul>
<li>SELECT 字段名称,… FROM tbl_name1<br>LEFT [OUTER] JOIN tbl_name2<br>ON 条件;</li>
<li>先显示左表中的全部记录，再去右表中查询复合条件的记录，不符合的以NULL代替</li>
</ul>
</li>
<li>右外连接<ul>
<li>SELECT 字段名称,… FROM tbl_name1<br>RIGHT [OUTER] JOIN tbl_name2<br>ON 条件;</li>
<li>先显示右表中的全部记录，再去左表中查询复合条件的记录，不符合的以NULL代替</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><ul>
<li>只有InnoDB存储引擎支持外键</li>
<li>创建外键<ul>
<li>建表时指定外键<ul>
<li>[CONSTRAINT 外键名称 ]FOREIGN KEY(字段名称) REFERENCES 主表(字段名称)</li>
<li>子表的外键字段和主表的主键字段类型要相似；如果是数值型要求一致，并且无符号也要一致；如果是字符型，要求类型一致，长度可以不同</li>
<li>如果外键字段没有创建索引，MySQL会自动帮我们添加索引</li>
<li>子表的外键关联的必须是父表的主键</li>
<li>外键约束的参照操作<ul>
<li>CASCADE<ul>
<li>从父表删除或更新，子表也跟着删除或者更新，级联的操作</li>
</ul>
</li>
<li>SET NULL<ul>
<li>从父表删除或者更新记录，并设置子表的外键列为NULL。</li>
</ul>
</li>
<li>NO ACTION | RESTRICT<ul>
<li>拒绝对父表做更新或者删除操作</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>动态添加外键<ul>
<li>动态添加外键<ul>
<li>ALTER TABLE tbl_name<br>[CONSTRAINT 外键名称] ADD FOREIGN KEY(外键字段) REFERENCES 主表(主键字段);</li>
<li>动态添加外键之前表中的记录一定合法的记录，没有脏值，否则外键添加不成功</li>
</ul>
</li>
<li>动态删除外键<ul>
<li>ALTER TABLE tbl_name<br>DROP FOREIGN KEY fk_name;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="特殊形式的查询"><a href="#特殊形式的查询" class="headerlink" title="特殊形式的查询"></a>特殊形式的查询</h3><ul>
<li>子查询<ul>
<li>SELECT 字段名称 FROM tbl_name WHERE col_name=(SELECT col_name FROM tbl_name)</li>
<li>内层语句查询的结果可以做为外层语句查询的条件</li>
<li>由IN引发的子查询</li>
<li>由比较运算符引出子查询</li>
<li>由EXISTS引发的子查询<br><img src="C:/Users/Administrator/Desktop/My-study-records-master/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/img/mysql_sq.jpg" alt></li>
<li>ANY SOME ALL</li>
<li>INSERT … SELECT</li>
<li>CREATE … SELECT</li>
<li>CREATE TABLE tbl_name LIKE tbl_name;</li>
</ul>
</li>
<li>联合查询<ul>
<li>UNION<ul>
<li>SELECT 字段名称,… FROM tbl_name1<br>UNION<br>SELECT 字段名称… FROM tbl_name2;</li>
</ul>
</li>
<li>UNION ALL<ul>
<li>SELECT 字段名称,… FROM tbl_name1<br>UNION ALL<br>SELECT 字段名称… FROM tbl_name2;</li>
</ul>
</li>
<li>UNION ALL 是简单的合并，UNION会去掉表中重复记录</li>
</ul>
</li>
<li>自身连接查询<ul>
<li>无限级分类的实现形式</li>
</ul>
</li>
<li>正则表达式查询<ul>
<li>正则表达式的模式字符<ul>
<li>^<ul>
<li>匹配字符串开始的部分</li>
</ul>
</li>
<li>$<ul>
<li>匹配字符串结束部分</li>
</ul>
</li>
<li>.<ul>
<li>代表一个任意字符</li>
</ul>
</li>
<li>[字符集合]<ul>
<li>[abc][a-z] [0-9]</li>
</ul>
</li>
<li>[^字符集合]<ul>
<li>除了集合中的内容</li>
</ul>
</li>
<li>s1|s2|s3<ul>
<li>匹配s1或者s2或者s3</li>
</ul>
</li>
<li>*<ul>
<li>代表匹配前面的字符0次1次或者多次</li>
</ul>
</li>
<li>+<ul>
<li>代表匹配前面的字符至少出现1次</li>
</ul>
</li>
<li>字符{n}<ul>
<li>前面的字符正好出现n次</li>
</ul>
</li>
<li>字符{m,n}<ul>
<li>前面的字符至少出现m次，最多出现n次</li>
</ul>
</li>
</ul>
</li>
<li>REGEXP ‘匹配方式’<ul>
<li>SELECT 字段名称,… FROM tbl_name WHERE 字段名称 REGEXP ‘匹配模式’</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="8、MYSQL常用函数"><a href="#8、MYSQL常用函数" class="headerlink" title="8、MYSQL常用函数"></a>8、MYSQL常用函数</h2><h3 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h3><ul>
<li>CEIL()<ul>
<li>进一取整</li>
</ul>
</li>
<li>FLOOR()<ul>
<li>舍掉小数部分</li>
</ul>
</li>
<li>ROUND()<ul>
<li>四舍五入</li>
</ul>
</li>
<li>TRUNCATE()<ul>
<li>截取小数点后几位</li>
</ul>
</li>
<li>MOD()<ul>
<li>取余数</li>
</ul>
</li>
<li>ABS()<ul>
<li>取绝对值</li>
</ul>
</li>
<li>POWER()<ul>
<li>幂运算</li>
</ul>
</li>
<li>PI()<ul>
<li>圆周率</li>
</ul>
</li>
<li>RAND()或者RAND(X)<ul>
<li>0~1之间的随机数</li>
</ul>
</li>
<li>SIGN(X)<ul>
<li>得到数字符号</li>
</ul>
</li>
<li>EXP(X)<ul>
<li>计算e的x次方</li>
</ul>
</li>
</ul>
<h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><ul>
<li>CHAR_LENGTH():得到字符串的字符数</li>
<li>LENGTH():返回字符串的字节长度</li>
</ul>
<pre><code class="sql">select char_length(&#39;你好啊&#39;);
+--------------------------+
| char_length(&#39;你好啊&#39;)    |
+--------------------------+
|                        3 |
+--------------------------+


mysql&gt; select length(&quot;你好啊&quot;);
+---------------------+
| length(&quot;你好啊&quot;)    |
+---------------------+
|                   9 |
+---------------------+</code></pre>
<ul>
<li><p>CONCAT(s1,s2,….):将字符串合并成一个字符串，含有<code>null</code>结果返回<code>null</code>。</p>
</li>
<li><p>CONCAT_WS(x,s1,s2,s2….)：以指定分隔符拼接字符串(<code>x</code>)，含有<code>null</code>就转换成空字符。</p>
</li>
<li><p>UPPER()| UCASE() LOWER()|LCASE(): 将字符串转换成大写或者小写 </p>
</li>
<li><p>REVERSE(): 字符串的反转</p>
</li>
<li><p>LEFT()|RIGHT(): 返回字符串的前几个字符或者后几个字符</p>
</li>
</ul>
<pre><code class="sql">SELECT LEFT(&#39;hello&#39;,2),RIGHT(&#39;hello&#39;,2);</code></pre>
<ul>
<li>LPAD()|RPAD(): 用字符串填充到指定长度</li>
</ul>
<pre><code class="sql">SELECT LPAD(&#39;abc&#39;,10,&#39;?&#39;);</code></pre>
<ul>
<li>去掉字符串两端/左边/右边的空格TRIM()|LTRIM()|RTRIM():</li>
<li>REPEAT(): 重复指定的次数</li>
<li>REPLACE(): 替代字符串</li>
</ul>
<pre><code class="sql">select replace(&#39;hello world&#39;, &#39;hello&#39;, &#39;hei&#39;);
+----------------------------------------+
| replace(&#39;hello world&#39;, &#39;hello&#39;, &#39;hei&#39;) |
+----------------------------------------+
| hei world                              |
+----------------------------------------+</code></pre>
<ul>
<li>SUBSTRING(str, start, to): 截取字符串</li>
</ul>
<pre><code class="sql">SELECT SUBSTRING(&#39;abcdefg&#39;,1,5);

-- 从1开始
+--------------------------+
| SUBSTRING(&#39;abcdefg&#39;,1,5) |
+--------------------------+
| abcde                    |
+--------------------------+</code></pre>
<ul>
<li>STRCMP(str, str): 比较字符串的ASCII顺序。<br>第一个大于第二个返回<code>1</code>;<br>第一个小于第二个返回<code>-1</code>;<br>第一个等于第二个返回<code>0</code>;</li>
</ul>
<h3 id="日期时间函数"><a href="#日期时间函数" class="headerlink" title="日期时间函数"></a>日期时间函数</h3><pre><code class="sql">-- 返回当前日期
SELECT CURDATE(),CURRENT_DATE();

-- 返回当前时间
SELECT CURTIME(),CURRENT_TIME();

-- 返回当前的日期时间
SELECT NOW(),CURRENT_TIMESTAMP(),SYSDATE();

-- 返回日期中的月份和月份的名称
SELECT MONTH(&#39;2017-02-19&#39;);
SELECT MONTH(CURDATE()),MONTHNAME(CURDATE());

-- 返回星期几
SELECT DAYNAME(NOW());

-- 返回一周内的第几天,0代表星期一
SELECT DAYOFWEEK(NOW());
SELECT WEEK(NOW());
SELECT YEAR(NOW()),MONTH(NOW()),DAY(NOW()),HOUR(NOW()),MINUTE(NOW()),SECOND(NOW());

-- DATEDIFF()计算两个日期相差的天数
SELECT DATEDIFF(&#39;2017-03-06&#39;,&#39;2017-03-02&#39;);</code></pre>
<blockquote>
<p><a href="http://wiki.jikexueyuan.com/project/mysql/useful-functions/time-functions.html" target="_blank" rel="noopener">http://wiki.jikexueyuan.com/project/mysql/useful-functions/time-functions.html</a></p>
</blockquote>
<h3 id="其它常用函数"><a href="#其它常用函数" class="headerlink" title="其它常用函数"></a>其它常用函数</h3><pre><code class="sql">-- 测试其它常用函数，版本、连接数
SELECT VERSION(),CONNECTION_ID();

SELECT USER(),CURRENT_USER(),SYSTEM_USER(),SESSION_USER();

-- 得到上一步插入操作产生AUTO_INCREMENT的值
SELECT LAST_INSERT_ID();

SELECT MD5(&#39;king&#39;);
SELECT SHA(&#39;king&#39;);
-- PASSWORD():密码加密算法
SELECT PASSWORD(&#39;root&#39;);</code></pre>
<h2 id="9、图形化工具管理数据库"><a href="#9、图形化工具管理数据库" class="headerlink" title="9、图形化工具管理数据库"></a>9、图形化工具管理数据库</h2><h3 id="BS"><a href="#BS" class="headerlink" title="BS"></a>BS</h3><ul>
<li>phpmyadmin</li>
</ul>
<h3 id="CS"><a href="#CS" class="headerlink" title="CS"></a>CS</h3><ul>
<li>Sequel Pro</li>
<li>windows<ul>
<li>SQLyog</li>
<li>navit for mysql</li>
<li>mysql front</li>
<li>mysql workbench</li>
</ul>
</li>
</ul>
<h2 id="常用SQL语句-1"><a href="#常用SQL语句-1" class="headerlink" title="常用SQL语句"></a>常用SQL语句</h2><h3 id="查看上一步操作产生的警告信息"><a href="#查看上一步操作产生的警告信息" class="headerlink" title="查看上一步操作产生的警告信息"></a>查看上一步操作产生的警告信息</h3><ul>
<li>SHOW WARNINGS;</li>
</ul>
<h3 id="mysql中的注释"><a href="#mysql中的注释" class="headerlink" title="mysql中的注释"></a>mysql中的注释</h3><pre><code class="sql"># 注释内容
-- 注释内容</code></pre>
<h3 id="检测表"><a href="#检测表" class="headerlink" title="检测表"></a>检测表</h3><ul>
<li>CHECK TABLE tbl_name</li>
</ul>
<h3 id="修复表"><a href="#修复表" class="headerlink" title="修复表"></a>修复表</h3><ul>
<li>REPAIR TABLE tbl_name</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zqfmcl.github.io/dialy/2019/10/04/2019-10-04-Object对象/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zqfmcl">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fey's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/2019-10-04-Object对象/" itemprop="url">Object对象</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T10:00:00+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="属性判断"><a href="#属性判断" class="headerlink" title="属性判断"></a>属性判断</h2><ul>
<li>in</li>
</ul>
<p><code>in</code>可以判断一个对象是否存在某个属性。</p>
<pre><code class="js">var xiaoming = {
    name: &#39;小明&#39;,
    birth: 1990,
};
&#39;name&#39; in xiaoming; // true
&#39;grade&#39; in xiaoming; // false</code></pre>
<p>但是对于继承的属性，也同样判断为<code>true</code>。</p>
<pre><code class="js">&#39;toString&#39; in xiaoming; // true</code></pre>
<ul>
<li>hasOwnProperty()</li>
</ul>
<p><code>hasOwnProperty()</code>可以判断一个属性是否自身拥有，而不是继承。</p>
<blockquote>
<p><code>Object.keys</code>方法和<code>Object.getOwnPropertyNames</code>方法都可以遍历对象自身的属性，返回数组，只是后者还返回不可枚举的属性。</p>
</blockquote>
<pre><code class="js">var o = {
  p1: 123,
  p2: 456
};

Object.keys(o)
// [&quot;p1&quot;, &quot;p2&quot;]

Object.getOwnPropertyNames(o)
// [&quot;p1&quot;, &quot;p2&quot;]</code></pre>
<h2 id="this"><a href="#this" class="headerlink" title="this"></a>this</h2><p>在函数内部定义的<code>this</code>，指向<code>window</code>;</p>
<p>在<code>&#39;use strict&#39;;</code>严格模式下，<code>this</code>指向<code>undefined</code>。</p>
<pre><code class="js">function tt(){console.log(this)}

tt();

//window{/.../}</code></pre>
<p>绑定到对象上的函数称为方法，方法上的<code>this</code>，指向这个对象；</p>
<pre><code class="js">var xiaoming = {
    name: &#39;小明&#39;,
    birth: 1990,
    age: function(){
        var y = new Date().getFullYear();
        return y - this.birth;
    }
};

xiaoming.age()
//26</code></pre>
<p>如何在方法函数里面再定义函数，<code>this</code>指向<code>window</code>。</p>
<h2 id="apply-、call"><a href="#apply-、call" class="headerlink" title="apply()、call()"></a>apply()、call()</h2><p>这两个方法可以改变函数的<code>this</code>指向。</p>
<ul>
<li><code>apply()</code>把参数打包成<code>Array</code>再传入；</li>
<li><code>call()</code>把参数按顺序传入。</li>
</ul>
<pre><code class="js">Math.max.apply(null, [3, 5, 4]); // 5
Math.max.call(null, 3, 5, 4); // 5</code></pre>
<p>对普通函数调用，我们通常把<code>this</code>绑定为<code>null</code>。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/12/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/14/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">zqfmcl</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">193</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">37</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zqfmcl</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
